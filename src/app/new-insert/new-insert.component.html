<div class="content">

<h1 class="title">New insert</h1>

<div class="input-content">
    <div class="section-insert-category-profile-processtime">
        <P>Insert name</P>
        <mat-form-field appearance="fill">
            <input matInput placeholder="Give insert name" [(ngModel)]="NewInsert.insertName">
        </mat-form-field>

        <p>Add insert to a category</p>
        <form>
            <mat-form-field appearance="fill">
            <mat-label>Category</mat-label>
            <input type="text"
                    placeholder="Category"
                    aria-label="Category"
                    matInput
                    [(ngModel)]="NewInsert.category"
                    [ngModelOptions]="{standalone: true}"
                    [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete">
                <mat-option *ngFor="let option of get_categoriesData" [value]="option.category">
                {{option.category}}
                </mat-option>
            </mat-autocomplete>
            </mat-form-field>
        </form>

        <p>Length of insert</p>
        <mat-form-field appearance="fill">
            <input matInput [(ngModel)]="NewInsert.length" placeholder="length of insert">
        </mat-form-field>

        <div class="check-profiles" >
        <p>profiles that fit this insert:</p>
        <mat-checkbox 
            *ngFor="let profile of parseProfiles(); index as i" 
            [checked]="profileStates[i].selected" 
            [value]="profile" 
            (change)="selectedProfile($event.checked, i, profile)"> 
                {{profile}}

        </mat-checkbox>
        </div>

            <p>Add process time</p>
            <div class="section-process-time">
            <div class="row-processtimes" *ngFor="let i of NewInsert.processes; index as index">
                <form>
                    <mat-form-field appearance="fill">
                    <mat-label>Process</mat-label>
                    <input type="text"
                            class="input-process"
                            placeholder="Process time"
                            aria-label="Number"
                            matInput
                            [(ngModel)]="NewInsert.processes[index].process"
                            [ngModelOptions]="{standalone: true}"
                            [matAutocomplete]="auto">
                            <!-- [(ngModel)]="processBom[index].process" -->
                    <mat-autocomplete #auto="matAutocomplete">
                        <mat-option *ngFor="let option of get_processData" [value]="option.process" (selectedOption)="selectedProcess(option.process, index)">
                        {{option.process}}
                        </mat-option>
                    </mat-autocomplete>
                    </mat-form-field>
                </form>
                
                <mat-form-field appearance="fill">
                    <input class="input-process-time-mins" [(ngModel)]="NewInsert.processes[index].minutes" matInput placeholder="Minutes">
                </mat-form-field>
                <button class="button-remove-component" mat-mini-fab color="warn" (click)="clickDeleteProcess(index)">-</button>
            </div>

            <div class="button-plus-one-process">
                <button mat-mini-fab color="primary" (click)="clickAddProcess()"> + 
                </button>
            </div>
        </div>
    </div>

    <!-- <div class="section-add-component"> -->
        <div class="section-materiallabel-materialrows-button-add">
            <p>Add material to this insert</p>

            <div class="row-component-conf" *ngFor="let fields of NewInsert.bom; index as j">
                <form> 
                    <mat-form-field appearance="fill" class="input-component">
                    <mat-label>Material</mat-label>
                    <input type="text"
                    class="input-process"
                    placeholder="Process time"
                    aria-label="Number"
                    [(ngModel)]="NewInsert.bom[j].name"
                    [ngModelOptions]="{standalone: true}"
                    matInput
                    [matAutocomplete]="auto">
                    <!-- [(ngModel)]="bomInsert[j].name" -->
                    <mat-autocomplete #auto="matAutocomplete" autoActiveFirstOption>
                        <mat-option *ngFor="let i of get_materialsData" [value]="i.material_name">
                        {{i.material_name}}
                        </mat-option>
                    </mat-autocomplete>
                    </mat-form-field>
                </form>
                
                <mat-form-field class="input-amount" appearance="fill">
                    <input matInput [(ngModel)]="NewInsert.bom[j].amount" placeholder="1" type="number">
                </mat-form-field>

                <button class="button-remove-component" mat-mini-fab color="warn" (click)="clickDeleteMaterial(j)">-</button>
            </div>
            <div class="button-plus-one-material">
            <button mat-mini-fab color="primary" (click)="clickAddMaterial()"> + 
                </button>
            </div>
        </div>

    <div class="buttons-upload-images">
        <p>Upload images</p>


        <button class="button-upload-real-image" mat-raised-button>Upload schematic <br> image</button>
        <button class="button-upload-schem-image" mat-raised-button>Upload real image</button>
    </div>
    <div class="section-addOptions-save">
        <button class="button-save-image" mat-raised-button (click)="clickSave()">Save</button>
        <button class="button-add-specs" mat-raised-button color="primary" routerLink="/new-inserts/new-specs">Add options</button>
    </div>

</div>
</div>
